<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Studio de Uñas Bella - Tu Barrio A Un Click</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #FF6B6B;
            --secondary-color: #4ECDC4;
            --accent-color: #FFEAA7;
            --light-color: #FFF9F9;
            --dark-color: #2D3436;
        }
        
        body {
            background-color: var(--light-color);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            padding-top: 70px;
        }
        
        .navbar {
            background: linear-gradient(135deg, var(--primary-color), var(--dark-color));
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1030;
        }
        
        .navbar-brand img {
            height: 40px;
            margin-right: 10px;
        }
        
        .hero-section {
            background: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('https://placehold.co/1920x600/FF6B6B/FFFFFF?text=Studio+de+Uñas+Bella') no-repeat center center/cover;
            height: 400px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            text-align: center;
            margin-top: 70px;
        }
        
        .section-title {
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            -webkit-text-fill-color: transparent;
            font-weight: 700;
            margin: 2rem 0;
            position: relative;
        }
        
        .section-title::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 3px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
        }
        
        .gallery-card {
            border: 1px solid #e0e0e0;
            border-radius: 15px;
            overflow: hidden;
            transition: all 0.3s ease;
            height: 100%;
            background: white;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
        }
        
        .gallery-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            border-color: var(--secondary-color);
        }
        
        .gallery-image {
            height: 250px;
            object-fit: cover;
            width: 100%;
            transition: transform 0.3s ease;
        }
        
        .gallery-card:hover .gallery-image {
            transform: scale(1.05);
        }
        
        .gallery-info {
            padding: 15px;
        }
        
        .price-list {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            margin: 30px 0;
        }
        
        .price-item {
            padding: 15px 0;
            border-bottom: 1px solid #eee;
        }
        
        .price-item:last-child {
            border-bottom: none;
        }
        
        .price-name {
            font-weight: 600;
            color: var(--primary-color);
        }
        
        .price-amount {
            font-weight: 700;
            font-size: 1.2rem;
            color: var(--dark-color);
        }
        
        .btn-appointment {
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            border: none;
            color: white;
            padding: 15px 30px;
            border-radius: 25px;
            font-weight: 600;
            transition: all 0.3s ease;
            width: 100%;
        }
        
        .btn-appointment:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 107, 107, 0.4);
        }
        
        .back-to-main {
            background: linear-gradient(45deg, #667eea, #764ba2);
            border: none;
            color: white;
            padding: 12px 25px;
            border-radius: 25px;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }
        
        .back-to-main:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }
        
        .form-control {
            border-radius: 10px;
            padding: 12px;
            border: 1px solid #e0e0e0;
        }
        
        .form-control:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 0.2rem rgba(255, 107, 107, 0.25);
        }
        
        .form-control.is-invalid {
            border-color: #dc3545;
            box-shadow: 0 0 0 0.2rem rgba(220, 53, 69, 0.25);
        }
        
        .invalid-feedback {
            display: block;
            margin-top: 0.25rem;
            font-size: 0.875em;
            color: #dc3545;
        }
        
        .modal-header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
        }
        
        .modal-title {
            font-weight: 600;
        }
        
        .close {
            color: white;
            opacity: 0.8;
        }
        
        .close:hover {
            opacity: 1;
        }
        
        @media (max-width: 768px) {
            .hero-section {
                height: 300px;
            }
            
            .gallery-card {
                margin-bottom: 20px;
            }
        }
    </style>
</head>
<body>
    <!-- Header con Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark sticky-top">
        <div class="container">
            <a class="navbar-brand" href="#">
                <img src="https://placehold.co/100x40/FF6B6B/FFFFFF?text=Bella" alt="Studio de Uñas Bella">
                Studio de Uñas Bella
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a href="../index.html" class="btn back-to-main ms-3">
                            <i class="fas fa-arrow-left me-2"></i>Volver a Tu Barrio
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero-section">
        <div class="container">
            <h1 class="display-4 fw-bold">¡Bienvenida a Studio de Uñas Bella!</h1>
            <p class="lead">Las mejores manicuras de Castelar, con estilo y elegancia.</p>
            <a href="#galeria" class="btn btn-lg btn-light">Ver Estilos</a>
        </div>
    </section>

    <!-- Sección de Galería de Tipos de Uñas -->
    <section id="galeria" class="container my-5">
        <h2 class="section-title">💅 TIPOS DE UÑAS</h2>
        <div class="row">
            <div class="col-md-4 mb-4">
                <div class="gallery-card">
                    <img src="https://placehold.co/400x300/FF6B6B/FFFFFF?text=Uñas+Gel" alt="Uñas Gel" class="gallery-image">
                    <div class="gallery-info">
                        <h5 class="card-title">Uñas de Gel</h5>
                        <p class="card-text">Duraderas y resistentes, con acabado brillante y natural.</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="gallery-card">
                    <img src="https://placehold.co/400x300/4ECDC4/FFFFFF?text=Uñas+Acrílicas" alt="Uñas Acrílicas" class="gallery-image">
                    <div class="gallery-info">
                        <h5 class="card-title">Uñas Acrílicas</h5>
                        <p class="card-text">Perfectas para alargar y dar forma, ideales para diseños elaborados.</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="gallery-card">
                    <img src="https://placehold.co/400x300/FFEAA7/2D3436?text=Semipermanente" alt="Semipermanente" class="gallery-image">
                    <div class="gallery-info">
                        <h5 class="card-title">Esmaltado Semipermanente</h5>
                        <p class="card-text">Duración de hasta 3 semanas, sin astillarse ni desconcharse.</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="gallery-card">
                    <img src="https://placehold.co/400x300/FF6B6B/FFFFFF?text=French" alt="French" class="gallery-image">
                    <div class="gallery-info">
                        <h5 class="card-title">French Clásico</h5>
                        <p class="card-text">Elegante y atemporal, con punta blanca y base natural.</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="gallery-card">
                    <img src="https://placehold.co/400x300/4ECDC4/FFFFFF?text=Diseños+Personalizados" alt="Diseños Personalizados" class="gallery-image">
                    <div class="gallery-info">
                        <h5 class="card-title">Diseños Personalizados</h5>
                        <p class="card-text">Flores, glitter, lunares, líneas... ¡Deja volar tu imaginación!</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="gallery-card">
                    <img src="https://placehold.co/400x300/FFEAA7/2D3436?text=Reparación" alt="Reparación" class="gallery-image">
                    <div class="gallery-info">
                        <h5 class="card-title">Reparación de Uñas</h5>
                        <p class="card-text">Reparamos uñas rotas o levantadas para que luzcan como nuevas.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Sección de Lista de Precios -->
    <section id="precios" class="container my-5">
        <h2 class="section-title">💰 LISTA DE PRECIOS</h2>
        <div class="price-list">
            <div class="row">
                <div class="col-md-6">
                    <h4 class="mb-4">Manicura</h4>
                    <div class="price-item">
                        <div class="d-flex justify-content-between">
                            <span class="price-name">Manicura Express</span>
                            <span class="price-amount">$2500</span>
                        </div>
                        <small class="text-muted">Limpieza, corte y esmaltado básico.</small>
                    </div>
                    <div class="price-item">
                        <div class="d-flex justify-content-between">
                            <span class="price-name">Manicura Spa</span>
                            <span class="price-amount">$3500</span>
                        </div>
                        <small class="text-muted">Exfoliación, masaje y esmaltado semipermanente.</small>
                    </div>
                    <div class="price-item">
                        <div class="d-flex justify-content-between">
                            <span class="price-name">Uñas de Gel</span>
                            <span class="price-amount">$6500</span>
                        </div>
                        <small class="text-muted">Aplicación completa con gel.</small>
                    </div>
                    <div class="price-item">
                        <div class="d-flex justify-content-between">
                            <span class="price-name">Uñas Acrílicas</span>
                            <span class="price-amount">$7000</span>
                        </div>
                        <small class="text-muted">Aplicación completa con acrílico.</small>
                    </div>
                    <div class="price-item">
                        <div class="d-flex justify-content-between">
                            <span class="price-name">Esmaltado Semipermanente</span>
                            <span class="price-amount">$4500</span>
                        </div>
                        <small class="text-muted">Duración de hasta 3 semanas.</small>
                    </div>
                </div>
                <div class="col-md-6">
                    <h4 class="mb-4">Servicios Adicionales</h4>
                    <div class="price-item">
                        <div class="d-flex justify-content-between">
                            <span class="price-name">Diseños Personalizados</span>
                            <span class="price-amount">$1500+</span>
                        </div>
                        <small class="text-muted">Por diseño (dependiendo de la complejidad).</small>
                    </div>
                    <div class="price-item">
                        <div class="d-flex justify-content-between">
                            <span class="price-name">French</span>
                            <span class="price-amount">$800</span>
                        </div>
                        <small class="text-muted">Adicional al servicio de uñas.</small>
                    </div>
                    <div class="price-item">
                        <div class="d-flex justify-content-between">
                            <span class="price-name">Glitter</span>
                            <span class="price-amount">$500</span>
                        </div>
                        <small class="text-muted">Adicional al servicio de uñas.</small>
                    </div>
                    <div class="price-item">
                        <div class="d-flex justify-content-between">
                            <span class="price-name">Reparación de Uñas</span>
                            <span class="price-amount">$2000</span>
                        </div>
                        <small class="text-muted">Por uña reparada.</small>
                    </div>
                    <div class="price-item">
                        <div class="d-flex justify-content-between">
                            <span class="price-name">Retiro de Uñas</span>
                            <span class="price-amount">$1500</span>
                        </div>
                        <small class="text-muted">Retiro profesional sin dañar tus uñas naturales.</small>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Sección de Reserva de Turnos -->
    <section id="turnos" class="container my-5">
        <h2 class="section-title">📅 RESERVA TU TURNO</h2>
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="card border-0 shadow-sm">
                    <div class="card-body p-4">
                        <h3 class="mb-4">Completa el formulario para reservar tu turno</h3>
                        <form id="appointmentForm">
                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <label for="clientName" class="form-label">Nombre Completo *</label>
                                    <input type="text" class="form-control" id="clientName" required>
                                    <div class="invalid-feedback">Por favor, ingresa tu nombre completo.</div>
                                </div>
                                <div class="col-md-6">
                                    <label for="phone" class="form-label">Teléfono de Contacto *</label>
                                    <input type="tel" class="form-control" id="phone" required>
                                    <div class="invalid-feedback">Por favor, ingresa un teléfono válido.</div>
                                </div>
                            </div>
                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <label for="appointmentDate" class="form-label">Fecha del Turno *</label>
                                    <input type="date" class="form-control" id="appointmentDate" required>
                                    <div class="invalid-feedback">Por favor, selecciona una fecha.</div>
                                </div>
                                <div class="col-md-6">
                                    <label for="appointmentTime" class="form-label">Hora del Turno *</label>
                                    <select class="form-control" id="appointmentTime" required>
                                        <option value="">Selecciona...</option>
                                        <option value="10:00">10:00 - 11:30</option>
                                        <option value="11:30">11:30 - 13:00</option>
                                        <option value="14:00">14:00 - 15:30</option>
                                        <option value="15:30">15:30 - 17:00</option>
                                        <option value="17:00">17:00 - 18:30</option>
                                        <option value="18:30">18:30 - 20:00</option>
                                    </select>
                                    <div class="invalid-feedback">Por favor, selecciona una hora.</div>
                                </div>
                            </div>
                            <div class="mb-3">
                                <label for="nailService" class="form-label">Servicio de Uñas *</label>
                                <select class="form-control" id="nailService" required>
                                    <option value="">Selecciona un servicio...</option>
                                    <option value="Manicura Express - $2500">Manicura Express - $2500</option>
                                    <option value="Manicura Spa - $3500">Manicura Spa - $3500</option>
                                    <option value="Uñas de Gel - $6500">Uñas de Gel - $6500</option>
                                    <option value="Uñas Acrílicas - $7000">Uñas Acrílicas - $7000</option>
                                    <option value="Esmaltado Semipermanente - $4500">Esmaltado Semipermanente - $4500</option>
                                    <option value="Reparación de Uñas - $2000">Reparación de Uñas - $2000</option>
                                    <option value="Retiro de Uñas - $1500">Retiro de Uñas - $1500</option>
                                </select>
                                <div class="invalid-feedback">Por favor, selecciona un servicio de uñas.</div>
                            </div>
                            <div class="mb-3">
                                <label for="notes" class="form-label">Notas Adicionales (opcional)</label>
                                <textarea class="form-control" id="notes" rows="3" placeholder="¿Tienes algún diseño en mente?"></textarea>
                            </div>
                            <button type="submit" class="btn btn-appointment">
                                <i class="fas fa-calendar-check me-2"></i> Reservar y Pagar
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Modal de Confirmación -->
    <div class="modal fade" id="confirmationModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">✅ Confirmar Reserva y Pago</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>Por favor, verifica que toda la información sea correcta antes de confirmar y pagar:</p>
                    <div class="bg-light p-3 rounded mb-3">
                        <p><strong>Nombre:</strong> <span id="confirmName"></span></p>
                        <p><strong>Teléfono:</strong> <span id="confirmPhone"></span></p>
                        <p><strong>Fecha:</strong> <span id="confirmDate"></span></p>
                        <p><strong>Hora:</strong> <span id="confirmTime"></span></p>
                        <p><strong>Servicio:</strong> <span id="confirmService"></span></p>
                        <p><strong>Precio:</strong> <span id="confirmPrice"></span></p>
                        <p><strong>Notas:</strong> <span id="confirmNotes"></span></p>
                    </div>
                    <p class="text-muted small">Al confirmar, serás redirigida a una página segura de Mercado Pago para completar el pago.</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Volver a Editar</button>
                    <button type="button" id="confirmButton" class="btn btn-primary">
                        <i class="fab fa-cc-visa me-2"></i> Confirmar y Pagar
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-dark text-white py-4 mt-5">
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <h5>Studio de Uñas Bella</h5>
                    <p>Av. Principal 321, Castelar</p>
                    <p>Tel: (11) 5555-7777</p>
                    <p>Horario: Martes a Sábado de 10:00 a 20:00</p>
                </div>
                <div class="col-md-6 text-md-end">
                    <h5>Redes Sociales</h5>
                    <a href="#" class="btn btn-outline-light btn-sm me-2"><i class="fab fa-facebook-f"></i></a>
                    <a href="#" class="btn btn-outline-light btn-sm me-2"><i class="fab fa-instagram"></i></a>
                    <a href="#" class="btn btn-outline-light btn-sm"><i class="fab fa-whatsapp"></i></a>
                </div>
            </div>
            <hr class="my-3">
            <div class="text-center">
                <p class="mb-0">© 2024 Studio de Uñas Bella - Todos los derechos reservados</p>
                <p class="small">Parte de la red <a href="../index.html" class="text-white">Tu Barrio A Un Click</a></p>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Formulario de turnos con validación y modal de confirmación
        document.getElementById('appointmentForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Validar formulario
            const clientName = document.getElementById('clientName');
            const phone = document.getElementById('phone');
            const appointmentDate = document.getElementById('appointmentDate');
            const appointmentTime = document.getElementById('appointmentTime');
            const nailService = document.getElementById('nailService');
            
            let isValid = true;
            
            // Resetear estilos de validación
            [clientName, phone, appointmentDate, appointmentTime, nailService].forEach(field => {
                field.classList.remove('is-invalid');
            });
            
            // Validar campos obligatorios
            if (!clientName.value.trim()) {
                clientName.classList.add('is-invalid');
                isValid = false;
            }
            
            if (!phone.value.trim() || !/^\d{10,15}$/.test(phone.value.replace(/\D/g, ''))) {
                phone.classList.add('is-invalid');
                isValid = false;
            }
            
            if (!appointmentDate.value) {
                appointmentDate.classList.add('is-invalid');
                isValid = false;
            }
            
            if (!appointmentTime.value) {
                appointmentTime.classList.add('is-invalid');
                isValid = false;
            }
            
            if (!nailService.value) {
                nailService.classList.add('is-invalid');
                isValid = false;
            }
            
            // Si el formulario es válido, mostrar modal de confirmación
            if (isValid) {
                // Extraer precio del servicio seleccionado
                const serviceText = nailService.value;
                const priceMatch = serviceText.match(/\$(\d+)/);
                const price = priceMatch ? parseInt(priceMatch[1]) : 0;
                
                // Llenar el modal de confirmación
                document.getElementById('confirmName').textContent = clientName.value;
                document.getElementById('confirmPhone').textContent = phone.value;
                document.getElementById('confirmDate').textContent = appointmentDate.value;
                document.getElementById('confirmTime').textContent = appointmentTime.value;
                document.getElementById('confirmService').textContent = serviceText;
                document.getElementById('confirmPrice').textContent = `$${price}`;
                document.getElementById('confirmNotes').textContent = document.getElementById('notes').value || 'Ninguna';
                
                // Mostrar modal de confirmación
                const confirmationModal = new bootstrap.Modal(document.getElementById('confirmationModal'));
                confirmationModal.show();
            }
        });

        // ✅✅✅ CONFIRMAR Y REDIRIGIR A MERCADO PAGO (CORREGIDO)
document.getElementById('confirmButton').addEventListener('click', async function() {
    const clientName = document.getElementById('clientName').value;
    const phone = document.getElementById('phone').value;
    const appointmentDate = document.getElementById('appointmentDate').value;
    const appointmentTime = document.getElementById('appointmentTime').value;
    const nailService = document.getElementById('nailService').value;
    const notes = document.getElementById('notes').value;
    
    // ✅ EXTRAER PRECIO DEL SERVICIO
    const priceMatch = nailService.match(/\$(\d+)/);
    const price = priceMatch ? parseInt(priceMatch[1]) : 0;

    // ✅ VALIDAR QUE HAYA UN PRECIO
    if (price <= 0) {
        alert('Error: No se pudo determinar el precio del servicio. Por favor, selecciona un servicio válido.');
        return;
    }

    // ✅ CREAR PREFERENCIA PARA MERCADO PAGO
    const preference = {
        items: [
            {
                title: nailService,
                quantity: 1,
                unit_price: price,
                currency_id: "ARS"
            }
        ],
        payer: {
            name: clientName.split(' ')[0] || 'Cliente',
            surname: clientName.split(' ').slice(1).join(' ') || 'Sin apellido',
            // ✅ EMAIL OBLIGATORIO: Usamos un email genérico por ahora
            email: "cliente@tubarrioaunclick.com",
            phone: {
                area_code: "11",
                number: phone.replace(/\D/g, '').slice(-8) || '00000000'
            }
        },
        back_urls: {
            success: "https://vicgom892.github.io/Zona-Tu-Barrio/castelar/negocios/gracias.html",
            failure: "https://vicgom892.github.io/Zona-Tu-Barrio/castelar/negocios/fallo.html",
            pending: "https://vicgom892.github.io/Zona-Tu-Barrio/castelar/negocios/pendiente.html"
        },
        auto_return: "approved",
        // ✅ QUITAR notification_url si no tienes un backend
        // notification_url: "https://tu-webhook.com/webhook"
    };

    try {
        // ✅ ENVIAR LA PETICIÓN A MERCADO PAGO
        const response = await fetch('https://api.mercadopago.com/checkout/preferences', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                // ✅ ¡REEMPLAZA ESTO CON UN TOKEN DE PRUEBA DE MERCADO PAGO!
                'Authorization': 'Bearer TEST-1234567890-abcdef123456-1234567890' 
            },
            body: JSON.stringify(preference)
        });

        // ✅ VERIFICAR SI LA RESPUESTA ES OK
        if (!response.ok) {
            const errorData = await response.json();
            console.error('Error de Mercado Pago:', errorData);
            throw new Error(`HTTP ${response.status}: ${errorData.message || 'Error desconocido'}`);
        }

        const data = await response.json();
        
        // ✅ VERIFICAR QUE EXISTE init_point
        if (data.init_point) {
            window.location.href = data.init_point;
        } else {
            throw new Error('La respuesta de Mercado Pago no contiene "init_point"');
        }

    } catch (error) {
        console.error('Error al crear la preferencia de pago:', error);
        alert('Hubo un error al procesar el pago. Por favor, intenta nuevamente más tarde.');
    }
});
        // Configurar fecha mínima (hoy)
        document.getElementById('appointmentDate').min = new Date().toISOString().split('T')[0];
    </script>
</body>
</html>