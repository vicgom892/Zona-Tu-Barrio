<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Panadería - Tu Barrio A Un Click</title>
  <link rel="manifest" href="../manifest.json">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Bangers&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
  <link rel="stylesheet" href="/Zona-Tu-Barrio/shared/css/negocios.css">
  <link rel="icon" href="/Zona-Tu-Barrio/shared/img/icon-192x192.png">
  <meta name="description" content="Panadería en Castelar. Panes, pasteles, tartas, y productos horneados. Entregas a domicilio.">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body data-categoria="panaderia" class="bg-gray-100 font-sans" id="inicio">
<div id="splash-screen" class="splash-screen">
        <div class="splash-particles" id="splashParticles"></div>
        <div class="splash-grid"></div>
        <div class="splash-logo">
            <img src="/Zona-Tu-Barrio/shared/img/icon-192x192.png" class="logo-icon" alt="logo de la app">
        </div>
        <h1 class="splash-text">Tu Barrio A Un Clik</h1>
        <div class="loading-bar-container">
            <div class="loading-bar" id="loadingBar"></div>
        </div>
        <p class="loading-text" id="loadingText">Cargando experiencia local...</p>
        <button onclick="skipSplash()" class="skip-btn">Saltar</button>
    </div>

  <!-- Header dinámico -->
  <header
    data-nombre-negocio="Panadería"
    data-logo-negocio="img/logo-negocio.png">
    <div class="container flex justify-between items-center p-4">
      <!-- Logo de la app animado con texto -->
      <a href="../index.html" class="logo-app group text-decoration-none inline-flex items-center space-x-2 bg-white px-3 py-1 rounded-full shadow-md border border-gray-200 transition-all duration-300 hover:scale-105 hover:shadow-lg animate-bounce-slow">
        <img src="/Zona-Tu-Barrio/shared/img/icon-192x192.png" alt="Logo App" class="h-8" />
        <span class="text-gray-700 font-semibold text-sm hidden sm:inline">Volver a la App</span>
      </a>

      <!-- Menú navegación (centrado en PC) -->
      <nav class="nav-menu hidden md:flex space-x-6">
        <a href="#inicio" class="text-gray-700 hover:text-green-600">Inicio</a>
        <a href="#productos" class="text-gray-700 hover:text-green-600">Productos</a>
        <a href="#ofertas" class="text-gray-700 hover:text-green-600">Ofertas</a>
        <a href="#contacto" class="text-gray-700 hover:text-green-600">Contacto</a>
      </nav>

      <!-- Logo del negocio -->
      <a href="../index.html" class="logo-negocio group inline-flex items-center space-x-2 bg-white px-3 py-1 rounded-full shadow-md border border-gray-200 transition-all duration-300 hover:scale-105 hover:shadow-lg animate-bounce-slow">
        <img id="logoNegocioPC" src="/Zona-Tu-Barrio/shared/img/icon-192x192.png" alt="Logo Negocio" class="h-10" />
      </a>

      <!-- Botón hamburguesa móvil -->
      <button id="mobileMenuToggle" class="md:hidden text-gray-700">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-6 h-6">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
        </svg>
      </button>
    </div>
  </header>

  <div id="mobileMenuModal" class="modal fade" tabindex="-1" aria-labelledby="mobileMenuModalLabel" aria-hidden="true">  
  <div class="modal-dialog modal-right">
    <div class="modal-content bg-white/95 backdrop-blur-md w-3/4 max-w-sm h-full p-6 flex flex-col shadow-lg rounded-r-xl relative">
      <!-- Header del modal -->
      <div class="flex justify-between items-center mb-4">
        <img id="logoNegocioModal" src="/Zona-Tu-Barrio/shared/img/icon-192x192.png" alt="Logo del Negocio" class="h-10 rounded shadow-md">
        <button id="mobileMenuClose" class="text-gray-800 hover:text-red-500 focus:outline-none">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
          </svg>
        </button>
      </div>

      <!-- Bienvenida -->
      <div class="mb-6">
        <h2 class="text-lg font-semibold text-gray-800">Bienvenido a</h2>
        <p id="nombreNegocioModal" class="text-xl font-bold text-green-700">Panadería</p>
      </div>

      <!-- Navegación móvil -->
      <nav class="space-y-4 text-base text-gray-700">
        <a href="#inicio" class="block hover:text-blue-600 transition">Inicio</a>
        <a href="#productos" class="block hover:text-blue-600 transition">Productos</a>
        <a href="#ofertas" class="block hover:text-blue-600 transition">Ofertas</a>
        <a href="#contacto" class="block hover:text-blue-600 transition">Contacto</a>
      </nav>

      <div class="flex-grow"></div>
    </div>
  </div>
  </div>

  <!-- Contenido principal -->
    <!-- Banner del negocio -->
    <section class="hero parallax" id="panaderia">
      <div class="overlay-text text-white text-center p-4">
        <h1 class="display-4 fw-bold">Bienvenidos</h1>
        <p class="lead mb-4">Disfruta de la mejor experiencia en tu barrio</p>
      </div>
    </section>

    <!-- Información del negocio -->
    <section class="bg-white rounded-lg shadow-md p-4 mb-6 ">
      <h2 class="text-xl font-semibold text-gray-800 mb-4">Información</h2>
      <div class="space-y-2">
        <p><strong>Dirección:</strong> Av. Independencia 901, Castelar, Buenos Aires</p>
        <p><strong>Horarios:</strong> <span data-hours="Mon-Sat 10:00-19:00">Lunes a Sábado: 10:00 - 19:00</span></p>
        <p><strong>Teléfono:</strong> +54 11 8765-4321</p>
        <!-- Botón de WhatsApp - Diseño moderno y funcional -->
        <a href="https://wa.me/5491187654321?text=Hola%20desde%20Tu%20Barrio%20a%20un%20Clik,%20quisiera%20más%20información"
          target="_blank"
          rel="noopener noreferrer"
          class="w-full mt-4 bg-gradient-to-r from-green-500 to-teal-500 hover:from-green-600 hover:to-teal-600 text-white font-semibold py-3 px-6 rounded-xl transition-all duration-300 transform hover:scale-105 flex items-center justify-center gap-3 shadow-md hover:shadow-lg group">
          <svg class="w-5 h-5 group-hover:animate-bounce" fill="currentColor" viewBox="0 0 24 24">
            <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67-.148-.198 0-.52.198-.987.654-.52.495-.988 1.139-1.139 1.396-.148.256-.297.297-.554.148-.255-.148-1.074-.396-2.03-.987-.757-.471-1.277-1.139-1.426-1.395-.149-.256-.018-.395.112-.534.12-.14.256-.297.395-.446.14-.148.197-.297.297-.495.099-.198.049-.371-.025-.52-.074-.149-.669-1.611-.916-2.206-.238-.575-.475-.495-.654-.495-.17 0-.436.059-.653.316-.218.257-.833 1.075-1.277 1.458-.444.434-.888.494-1.332.494-.363 0-.554-.218-.745-.436-.19-.218-.728-1.075-1.193-1.612-.198-.423-.396-.473-.703.473-.306 0-.584-.07-.947-.237-.363-.168-1.458-.52-2.773-1.396-1.98-.758-3.284-1.98-3.483-2.18-.198-.198-.358-.306-.358-.554 0-.248.237-.653.713-1.129 1.227-1.21 2.523-1.907 3.551-2.26.99-.34 2.13-.34 3.502.12 1.37.46 2.77 1.56 3.76 2.55.99.99 1.485 1.67 2.03 2.03.548.36 1.206.653 1.924.653.71 0 1.14-.148 1.485-.297.346-.148 1.075-.994 1.227-1.226.148-.238.296-.148.553-.148.257 0 .563.059 1.017.653.52.654 1.83 1.83 1.83 2.77 0 .94-.653 1.67-1.307 2.03-.654.36-1.207.443-1.76.443-.495 0-1.014-.148-1.468-.395"/>
          </svg>
          <span>Chatear con Veterinaria Mascotas</span>
        </a>
      </div>
    </section>

    <section class="offers" id="productos">
      <h2 class="text-2xl font-bold text-gray-800 mb-4">Ofertas Especiales</h2>
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
        <div class="offer-card bg-white rounded-lg shadow-md p-4">
          <img src="/Zona-Tu-Barrio/castelar/img/panaderia-1.webp" alt="Descuento en Panes" class="offer-img w-full h-32 object-cover rounded-t-lg">
          <h3 class="text-lg font-semibold text-gray-800 mt-2">20% en Panes</h3>
          <p class="text-gray-600">Panes frescos con un 20% de descuento. Variedades disponibles.</p>
        </div>

        <div class="offer-card bg-white rounded-lg shadow-md p-4">
          <img src="/Zona-Tu-Barrio/castelar/img/panaderia-2.webp" alt="Oferta en Pasteles" class="offer-img w-full h-32 object-cover rounded-t-lg">
          <h3 class="text-lg font-semibold text-gray-800 mt-2">Pasteles Especiales</h3>
          <p class="text-gray-600">Pasteles decorados con temas personalizados. ¡Ideales para cualquier celebración!</p>
        </div>

        <div class="offer-card bg-white rounded-lg shadow-md p-4">
          <img src="/Zona-Tu-Barrio/castelar/img/panaderia-3.webp" alt="Tartas Gourmet" class="offer-img w-full h-32 object-cover rounded-t-lg">
          <h3 class="text-lg font-semibold text-gray-800 mt-2">Tartas Gourmet</h3>
          <p class="text-gray-600">Tartas elaboradas con ingredientes premium, perfectas para regalar.</p>
        </div>

        <div class="offer-card bg-white rounded-lg shadow-md p-4">
          <img src="/Zona-Tu-Barrio/castelar/img/panaderia-4.webp" alt="Entrega Gratis" class="offer-img w-full h-32 object-cover rounded-t-lg">
          <h3 class="text-lg font-semibold text-gray-800 mt-2">Entrega Gratis</h3>
          <p class="text-gray-600">Pedí online y obtené entrega gratuita en Castelar.</p>
        </div>
      </div>
    </section>

    <!-- Sección Ofertas de la Semana -->
    <section class="parallax-offer" id="ofertas">
      <div class="container py-5 position-relative z-10" id="ofertas-container">
        <h2 class="text-center text-white mb-5">🌟 Ofertas de la Semana</h2>
        <div class="row justify-content-center g-4" id="ofertas-list">
          <!-- Tarjetas generadas dinámicamente -->
        </div>
      </div>
    </section>

     <!-- Servicios destacados -->
    <section class="bg-white rounded-lg shadow-md p-4">
      <h2 class="text-xl font-semibold text-gray-800 mb-4">Servicios Destacados</h2>
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
        <div class="flex items-start space-x-3 business-card bg-white rounded-lg shadow-md p-4">
          <img src="/Zona-Tu-Barrio/castelar/img/panaderia-5.webp" alt="Panes Frescos" class="w-20 h-20 object-cover rounded" loading="lazy">
          <div>
            <h3 class="font-semibold text-gray-800">Panes Frescos</h3>
            <p class="text-gray-600">Panes horneados diariamente con ingredientes de alta calidad.</p>
          </div>
        </div>
        <div class="flex items-start space-x-3 business-card bg-white rounded-lg shadow-md p-4">
          <img src="/Zona-Tu-Barrio/castelar/img/panaderia.webp" alt="Pasteles Decorados" class="w-20 h-20 object-cover rounded" loading="lazy">
          <div>
            <h3 class="font-semibold text-gray-800">Pasteles Decorados</h3>
            <p class="text-gray-600">Pasteles personalizados para cualquier ocasión, con decoraciones únicas.</p>
          </div>
        </div>
        <div class="flex items-start space-x-3 business-card bg-white rounded-lg shadow-md p-4">
          <img src="/Zona-Tu-Barrio/castelar/img/panaderia-3.webp" alt="Tartas Gourmet" class="w-20 h-20 object-cover rounded" loading="lazy">
          <div>
            <h3 class="font-semibold text-gray-800">Tartas Gourmet</h3>
            <p class="text-gray-600">Tartas elaboradas con ingredientes seleccionados, ideales para regalos.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Formulario de Agregar Productos -->
    <section class="bg-white rounded-lg shadow-md p-4 mb-6" id="contacto">
      <h2 class="text-xl font-semibold text-gray-800 mb-4">Formulario de Agregar Productos</h2>
      <form id="add-product-form" class="space-y-4">
        <div>
          <label for="product-name" class="block text-gray-700 font-medium">Nombre del Producto</label>
          <input type="text" id="product-name" name="product-name" class="w-full p-2 border border-gray-300 rounded" required>
        </div>
        <div>
          <label for="product-category" class="block text-gray-700 font-medium">Categoría</label>
          <select id="product-category" name="category" class="w-full p-2 border border-gray-300 rounded" required>
            <option value="" disabled selected>Selecciona una categoría</option>
            <option value="panes">Panes</option>
            <option value="pasteles">Pasteles</option>
            <option value="tartas">Tartas</option>
            <option value="productos-horneados">Productos Horneados</option>
          </select>
        </div>
        <div>
          <label for="product-description" class="block text-gray-700 font-medium">Descripción</label>
          <textarea id="product-description" name="description" rows="4" class="w-full p-2 border border-gray-300 rounded" required></textarea>
        </div>
        <div>
          <label for="product-price" class="block text-gray-700 font-medium">Precio</label>
          <input type="number" id="product-price" name="price" class="w-full p-2 border border-gray-300 rounded" step="0.01" required>
        </div>
        <button type="submit" class="btn-whatsapp bg-green-500 text-white px-4 py-2 rounded-lg flex items-center space-x-2">
          <i class="fab fa-whatsapp"></i>
          <span>Agregar Producto</span>
        </button>
      </form>
    </section>

  <!-- Botón Volver Arriba -->
  <button id="scrollTopBtn" class="fixed bottom-4 right-4 bg-blue-600 text-white p-3 rounded-full shadow-lg hidden">
    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18"></path>
    </svg>
  </button>


  <footer class="bg-white shadow-inner mt-8">
    <div class="container mx-auto px-4 py-6 flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0">

      <div class="space-x-4 text-sm text-gray-600">
        <a href="#inicio" class="hover:text-blue-600">Inicio</a>
        <a href="#productos" class="hover:text-blue-600">Negocios</a>
        <a href="#ofertas" class="hover:text-blue-600">Promos</a>
        <a href="#contacto" class="hover:text-blue-600">Contacto</a>
      </div>
      <p class="text-xs text-gray-400">© 2025 Tu Barrio A Un Click. Todos los derechos reservados.</p>
    </div>
    <!-- Botón de instalación en el footer -->
    <div class="install-banner mt-4 p-3 bg-white rounded shadow-sm">
      <div class="d-flex align-items-center">
        <img src="/Zona-Tu-Barrio/shared/img/icon-192x192.png" alt="Logo App" class="me-3" style="width: 60px; height: 60px;">
        <div class="flex-grow-1">
          <div class="small text-muted mb-1">¿Quieres la app completa?</div>
          <button id="botonInstalar" class="btn btn-success w-100 py-2">
            <i class="fas fa-download me-1"></i>Instalar Tu Barrio A Un Clik
          </button>
        </div>
      </div>
    </div>
  </footer>
<script>
  document.addEventListener("DOMContentLoaded", () => {
  console.log("✅ DOMContentLoaded disparado");

  // Scroll Suave
  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener("click", (e) => {
      e.preventDefault();
      const targetId = anchor.getAttribute("href");
      const targetElement = document.querySelector(targetId);
      if (targetElement) {
        const navbarHeight = document.querySelector("header")?.offsetHeight || 0;
        const elementPosition = targetElement.getBoundingClientRect().top + window.scrollY;
        const offsetPosition = elementPosition - navbarHeight;
        window.scrollTo({ top: offsetPosition, behavior: "smooth" });
        if (mobileMenuModal) {
          const modalInstance = bootstrap.Modal.getInstance(mobileMenuModal);
          if (modalInstance) modalInstance.hide();
          console.log("Menú móvil cerrado tras scroll suave");
        }
      } else {
        console.warn("⚠️ Elemento con ID", targetId, "no encontrado");
      }
    });
  });



  // Cargar ofertas desde JSON con filtrado por categoría
  const ofertasContainer = document.getElementById("ofertas-list");
  if (ofertasContainer) {
    let categoria = document.body.dataset.categoria || "panaderia";
    console.log("Categoría detectada:", categoria);

    fetch("/Zona-Tu-Barrio/castelar/datos/ofertas-panaderia.json")
      .then((response) => {
        if (!response.ok) {
          throw new Error("Error al cargar el archivo JSON");
        }
        return response.json();
      })
      .then((data) => {
        const ofertasFiltradas = data.ofertas.filter(oferta => oferta.categoria === categoria);
        if (ofertasFiltradas.length === 0) {
          console.warn(`⚠️ No se encontraron ofertas para la categoría "${categoria}"`);
          ofertasContainer.innerHTML = `<p class="text-white text-center">No hay ofertas disponibles para esta categoría</p>`;
        } else {
          ofertasFiltradas.forEach((oferta) => {
            const col = document.createElement("div");
            col.className = "col-md-5";

            col.innerHTML = `
              <div class="card card-offer">
                <img src="${oferta.imagen}" class="card-img-top" alt="${oferta.titulo}" style="height: 200px; object-fit: cover;">
                <div class="card-body text-center">
                  <h3 class="card-title">${oferta.titulo}</h3>
                  <p class="card-text">${oferta.descripcion}</p>
                  <a href="${oferta.boton.url}" target="_blank" class="btn btn-whatsapp">${oferta.boton.texto}</a>
                </div>
              </div>
            `;

            ofertasContainer.appendChild(col);
          });
        }
      })
      .catch((error) => {
        console.error("Error al cargar las ofertas:", error);
        ofertasContainer.innerHTML = `<p class="text-white text-center">No se pudieron cargar las ofertas</p>`;
      });
  } else {
    console.warn("No se encontró el contenedor de ofertas");
  }

  // Formularios de Reserva (para barbería o veterinaria)
  const reservationForm = document.getElementById("reservation-form");
  const vetReservationForm = document.getElementById("vet-reservation-form");

  if (reservationForm) {
    reservationForm.addEventListener("submit", (e) => {
      e.preventDefault();
      console.log("Formulario de reservas (barbería) enviado");

      const nameInput = reservationForm.querySelector("#name");
      const lastnameInput = reservationForm.querySelector("#lastname");
      const phoneInput = reservationForm.querySelector("#phone");
      const dateInput = reservationForm.querySelector("#date");
      const timeInput = reservationForm.querySelector("#time");

      if (!nameInput || !lastnameInput || !phoneInput || !dateInput || !timeInput) {
        console.error("Uno o más elementos del formulario de reserva no encontrados", {
          nameInput,
          lastnameInput,
          phoneInput,
          dateInput,
          timeInput,
        });
        alert("Error: No se encontraron todos los campos del formulario. Por favor, verifica la página.");
        return;
      }

      const name = nameInput.value.trim();
      const lastname = lastnameInput.value.trim();
      const phone = phoneInput.value.trim();
      const date = dateInput.value.trim();
      const time = timeInput.value.trim();

      console.log("Valores del formulario (barbería):", { name, lastname, phone, date, time });

      if (!name || !lastname || !phone || !date || !time) {
        console.warn("Campos incompletos en formulario de reserva (barbería):", { name, lastname, phone, date, time });
        alert("Por favor, completa todos los campos obligatorios.");
        return;
      }

      const formattedDate = new Date(date).toLocaleDateString("es-AR", {
        weekday: "long",
        year: "numeric",
        month: "long",
        day: "numeric",
      });

      let categoria = document.body.dataset.categoria || "panaderia";
      let businessName = "Negocio";
      let whatsappNumber = "5491157194796";
      if (categoria === "barberia") {
        businessName = "Barbería";
        whatsappNumber = "5491123456789";
      }

      const message = `Reserva en ${businessName}:\nNombre: ${name} ${lastname}\nTeléfono: ${phone}\nFecha: ${formattedDate}\nHora: ${time}`;
      const encodedMessage = encodeURIComponent(message);
      const whatsappUrl = `https://wa.me/${whatsappNumber}?text=${encodedMessage}`;
      console.log("Abriendo WhatsApp URL (barbería):", whatsappUrl);
      const win = window.open(whatsappUrl, "_blank");
      if (!win || win.closed || typeof win.closed === "undefined") {
        console.error("Error abriendo WhatsApp (barbería):", whatsappUrl);
        alert("Error al abrir WhatsApp. Por favor, verifica que no tengas un bloqueador de pop-ups activo o intenta de nuevo.");
      } else {
        console.log("WhatsApp abierto para reserva (barbería)");
        reservationForm.reset();
      }
    });
  } else {
    console.warn("⚠️ Elemento con ID 'reservation-form' no encontrado");
  }
});
</script>
<script src="https://unpkg.com/aos@next/dist/aos.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="/Zona-Tu-Barrio/shared/js/splash.js"></script>
<script src="/Zona-Tu-Barrio/shared/js/install-app.js"></script>
<script>
  AOS.init();
</script>

</body>
</html>